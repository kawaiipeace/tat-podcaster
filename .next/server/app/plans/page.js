(()=>{var e={};e.id=996,e.ids=[996],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2048:e=>{"use strict";e.exports=require("fs")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},9724:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>d,pages:()=>x,routeModule:()=>h,tree:()=>o}),s(5134),s(9833),s(5866);var l=s(3191),r=s(8716),a=s(7922),n=s.n(a),i=s(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let o=["",{children:["plans",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5134)),"/Users/peace/Documents/projects/POC/tat-podcaster/app/plans/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9833)),"/Users/peace/Documents/projects/POC/tat-podcaster/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],x=["/Users/peace/Documents/projects/POC/tat-podcaster/app/plans/page.tsx"],d="/plans/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new l.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/plans/page",pathname:"/plans",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7113:(e,t,s)=>{Promise.resolve().then(s.bind(s,6868))},6868:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var l=s(326),r=s(1594),a=s(6378),n=s(5047),i=s(772),c=s(7577),o=s(1697),x=s(1334),d=s(6775),u=s(4008),h=s(4111),m=s(130),p=s(6042),f=s(2881);let y=(0,f.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),j=(0,f.Z)("BatteryFull",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}],["line",{x1:"10",x2:"10",y1:"11",y2:"13",key:"haxvl5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"13",key:"c6fn6x"}]]),g=(0,f.Z)("BatteryMedium",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}],["line",{x1:"10",x2:"10",y1:"11",y2:"13",key:"haxvl5"}]]),w=(0,f.Z)("BatteryLow",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}]]),b=(0,f.Z)("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);var v=s(4447),N=s(1177),k=s(1372),P=s(8464);function C(){return(0,l.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function z({setSuccess:e}){(0,n.useSearchParams)(),(0,n.useRouter)();let{toast:t}=(0,u.pm)(),{user:s}=(0,d.ll)();return(0,x.t)(s?.id??""),(0,N.y)(),null}function M(){let[e,t]=(0,c.useState)(!1),s=(0,n.useRouter)(),[f,M]=(0,c.useState)(!1),[B,_]=(0,c.useState)(!1),[S,A]=(0,c.useState)(""),{user:q}=(0,d.ll)(),{toast:E}=(0,u.pm)(),{isFetching:O}=(0,N.y)(),D=(0,x.t)(q?.id??""),Y=(0,x.P)(q?.id??""),L=(0,r.aM)(a.h.users.getTotalPodcastsOfUser,{clerkId:q?.id??""}),H=(0,r.BH)(a.h.stripe.pay),Z=(0,r.BH)(a.h.stripe.cancelSubscription),I=(0,r.BH)(a.h.stripe.createCustomerPortal),U="Enterprise"===Y.plan?"unlimited":30-L,F=async e=>{if(A(e),_(!0),"Free"===e){s.push("/");return}f&&(e+="-annual");try{let t=await H({plan:e});s.push(t)}catch(e){E({title:"Error",description:"An error occurred while processing your payment",variant:"destructive"}),_(!1),A("")}_(!1),A("")},G=async()=>{if(A("cancel"),_(!0),!window.confirm("Are you sure you want to cancel your subscription?")){A(""),_(!1);return}if(!q){E({title:"Error",description:"You must be logged in to cancel your subscription",variant:"destructive"}),A(""),_(!1);return}if("Free"===Y.plan){E({title:"Error",description:"You cannot cancel a free subscription",variant:"destructive"}),A(""),_(!1);return}try{(await Z({clerkId:q.id})).success&&(E({title:"Success",description:"Your subscription has been cancelled",variant:"success"}),A(""),_(!1),s.replace("/"))}catch(e){E({title:"Error",description:"An error occurred while cancelling your subscription, please try again later.",variant:"destructive"}),A(""),_(!1)}},$=async()=>{try{A("manage"),_(!0);let e=await I();s.push(e),_(!1),A("")}catch(e){A(""),_(!1),E({title:"Error",description:"An error occurred while processing your request",variant:"destructive"})}};return!O&&e?(0,l.jsxs)("main",{className:"flex relative flex-col w-full items-center justify-center min-h-screen bg-zinc-950",children:[l.jsx(o.default,{width:1920,height:1080,className:"absolute w-screen h-full min-h-screen object-cover z-0",src:"/images/blueBlob.svg",alt:"alt text"}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[l.jsx("h1",{className:"text-4xl font-bold text-white-1 z-50 text-center",children:"Thank you for subscribing!"}),(0,l.jsxs)("p",{className:" text-gray-300 mt-4 z-30 text-center",children:["You are now subscribed to the ",Y.plan," plan."]})]})]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx(c.Suspense,{fallback:l.jsx(function(){return l.jsx("div",{className:"fixed top-0 left-0 z-50 w-full h-full bg-[--primary-color] flex items-center justify-center",children:l.jsx(k.Z,{})})},{}),children:l.jsx(z,{setSuccess:t})}),O&&!D?l.jsx("div",{className:"fixed top-0 left-0 z-50 w-full h-full bg-[--primary-color] flex items-center justify-center",children:l.jsx(k.Z,{})}):D?(0,l.jsxs)("div",{className:"flex relative flex-col",children:[(0,l.jsxs)("div",{className:"flex relative w-full min-h-screen",children:[l.jsx(h.default,{}),(0,l.jsxs)("div",{className:"flex flex-col flex-1 bg-[--primary-color] rounded-lg p-[24px] w-full",children:[(0,l.jsxs)("div",{className:"flex h-16 items-center justify-between md:hidden",children:[l.jsx(o.default,{src:"/icons/miclogo.svg",width:30,height:30,alt:"menu icon"}),l.jsx(p.default,{})]}),l.jsx("h1",{className:"text-4xl font-bold text-white-1 text-center",children:"Your current plan"}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 mt-8",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[l.jsx("h2",{className:"text-xl font-semibold text-white-1",children:"Plan details"}),(0,l.jsxs)("div",{className:"flex flex-col w-full mx-auto",children:[(0,l.jsxs)("p",{className:"flex relative justify-between items-center text-base text-slate-300",children:[(0,l.jsxs)("div",{className:"flex items-center self-start gap-2",children:["Your current plan is the ",Y.plan," plan"," ",Y.endsOn>Date.now()+2592e6?l.jsx("span",{className:"inline-flex me-2 items-center text-xs text-gray-300 bg-gray-700  rounded-full py-0.5 px-2.5",children:"Billed annually"}):null]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)(i.z,{onClick:()=>$(),title:"Manage",className:"w-[fit-content] hover:brightness-[.85] bg-[--accent-color] text-white-1",children:[B&&"manage"===S?l.jsx(C,{}):null,"Manage"]}),(0,l.jsxs)(i.z,{onClick:()=>G(),title:"Cancel",className:"w-[fit-content] hover:brightness-[.85] bg-red-500 text-white-1",children:[B&&"cancel"===S?l.jsx(C,{}):null,"Cancel"]})]})]}),(0,l.jsxs)("p",{className:"text-base text-slate-300",children:["Your subscription ends on"," ",new Date(Y.endsOn).toLocaleDateString()]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[l.jsx("h2",{className:"text-xl font-semibold text-white-1",children:"Usage"}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("p",{className:"text-base text-slate-300",children:[l.jsx(y,{size:24,className:"inline-flex mr-2 text-white-1"}),"You have created ",L," podcasts this month."]}),(0,l.jsxs)("p",{className:"flex items-center text-base text-slate-300",children:["unlimited"===U||U-L==30?l.jsx(j,{size:24,className:"inline-flex mr-2 text-white-1",style:{transform:"rotate(270deg)"}}):U>10?l.jsx(g,{size:24,className:"inline-flex mr-2 text-white-1",style:{transform:"rotate(270deg)"}}):U<=10&&U>0?l.jsx(w,{size:24,className:"inline-flex mr-2 text-white-1",style:{transform:"rotate(270deg)"}}):0===U?l.jsx(b,{size:24,className:"inline-flex mr-2 text-white-1",style:{transform:"rotate(270deg)"}}):null,"You have ",U," podcasts remaining for the month of"," ",new Date().toLocaleString("default",{month:"long"}),"."]})]})]})]})]}),l.jsx(m.default,{})]}),l.jsx(v.default,{})]}):(0,l.jsxs)("main",{className:"flex relative flex-col w-full items-center justify-center min-h-screen bg-zinc-950",children:[l.jsx(o.default,{width:1920,height:1080,className:"absolute w-screen h-full min-h-screen object-cover z-0",src:"/images/blueBlob.svg",alt:"alt text"}),(0,l.jsxs)("div",{className:"relative items-center px-8 py-6 mx-auto md:px-12 max-w-7xl",children:[l.jsx("h1",{className:"text-4xl font-bold text-white-1 z-50 text-center",children:"Choose a plan that works for you"}),l.jsx("div",{className:"md:max-w-sm mx-auto",children:(0,l.jsxs)("div",{className:"inline-flex w-full border rounded-full my-6 overflow-hidden border-[#fff3] p-0.5 z-0",children:[l.jsx("button",{type:"button",onClick:()=>M(!1),className:` ${f?"":"bg-[#00000080]"} font-medium rounded-full transition h-12 w-full py-2 block px-8 text-xs text-white-1`,children:"Monthly"}),l.jsx("button",{onClick:()=>M(!0),className:` ${f?"bg-[#00000080]":""} font-medium rounded-full transition h-12 w-full py-2 block px-8 text-xs border-white text-white-1`,type:"button",children:"Annual"})]})}),l.jsx("div",{className:"grid grid-cols-1 gap-2 mt-12 lg:grid-cols-3",children:P.dh.map(e=>(0,l.jsxs)("div",{className:`flex flex-col justify-between p-8 shadow-2xl  rounded-3xl ${e.cardBgClass} backdrop-blur-3xl shadow-gray-900/50`,children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex flex-col justify-between gap-3",children:[l.jsx("p",{className:"text-xl font-medium tracking-tight text-white-1",children:e.name}),(0,l.jsxs)("p",{className:"text-white-1",children:[l.jsx("span",{className:"text-2xl tracking-tight",children:(0,l.jsxs)("span",{children:["$",f?e.annualPrice:e.monthlyPrice]})}),(0,l.jsxs)("span",{className:"text-base font-medium",children:["/m",l.jsx("span",{children:f&&"0"!==e.annualPrice&&" (billed annually)"})]})]})]}),l.jsx("p",{className:"mt-8 text-xs text-[#fffc]",children:e.description}),(0,l.jsxs)("ul",{className:"flex flex-col order-last mt-8 text-sm text-white gap-y-3",children:[e.features.map(e=>(0,l.jsxs)("li",{className:"inline-flex text-white-1 items-center gap-2",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-circle-check",width:"20",height:"20",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),l.jsx("path",{d:"M9 12l2 2l4 -4"})]}),e]},e)),e.unavailableFeatures.map(e=>(0,l.jsxs)("li",{className:"inline-flex text-white-1 items-center gap-2 opacity-50",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-circle-x",width:"20",height:"20",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),l.jsx("path",{d:"M10 10l4 4m0 -4l-4 4"})]}),e]},e))]})]}),l.jsx("div",{className:"flex mt-6",children:l.jsx("button",{onClick:()=>F(e.name),title:e.name,"aria-label":"get started",className:`flex items-center justify-center w-full  h-12 px-4 py-2 text-base font-medium transition-all duration-200 rounded-xl ${e.buttonClass}`,children:B&&e.name===S?l.jsx(C,{}):"Get started"})})]},e.name))})]})]})]})}},1334:(e,t,s)=>{"use strict";s.d(t,{P:()=>i,t:()=>n});var l=s(1594),r=s(6378),a=s(1177);function n(e){let{setIsFetching:t}=(0,a.y)(),s=(0,l.aM)(r.h.users.getSubscriptionByClerkId,{clerkId:e});return!!s&&!!s.endsOn&&s?.endsOn>Date.now()}function i(e){let{setIsFetching:t}=(0,a.y)(),s=(0,l.aM)(r.h.users.getSubscriptionByClerkId,{clerkId:e});return s&&s.plan?s:"free"}s(7577)},5134:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});let l=(0,s(8570).createProxy)(String.raw`/Users/peace/Documents/projects/POC/tat-podcaster/app/plans/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),l=t.X(0,[134,481,246,673],()=>s(9724));module.exports=l})();