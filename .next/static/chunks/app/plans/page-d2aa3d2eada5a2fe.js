(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[996],{653:function(e,t,s){Promise.resolve().then(s.bind(s,5319))},5319:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var l=s(7437),n=s(5145),i=s(1620),r=s(9376),a=s(2869),c=s(2265),o=s(3145),d=s(8886),x=s(7770),u=s(7992),h=s(38),f=s(1578),m=s(7560),p=s(9205);let y=(0,p.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),w=(0,p.Z)("BatteryFull",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}],["line",{x1:"10",x2:"10",y1:"11",y2:"13",key:"haxvl5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"13",key:"c6fn6x"}]]),j=(0,p.Z)("BatteryMedium",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}],["line",{x1:"10",x2:"10",y1:"11",y2:"13",key:"haxvl5"}]]),g=(0,p.Z)("BatteryLow",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}]]),v=(0,p.Z)("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);var b=s(1945),N=s(5546),k=s(1787),S=s(2405);function E(){return(0,l.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function T(e){var t;let{setSuccess:s}=e,l=(0,r.useSearchParams)(),n=(0,r.useRouter)(),{toast:i}=(0,u.pm)(),{user:a}=(0,x.ll)(),o=(0,d.t)(null!==(t=null==a?void 0:a.id)&&void 0!==t?t:""),h=(0,N.y)();return(0,c.useEffect)(()=>{!h&&l.get("session_id")&&o&&(s(!0),i({title:"Payment successful âœ…",variant:"success"})),setTimeout(()=>{n.replace("/plans"),s(!1)},5e3)},[h,o,n,l,s,i]),null}function A(){var e,t,s;let[p,A]=(0,c.useState)(!1),C=(0,r.useRouter)(),[z,M]=(0,c.useState)(!1),[O,I]=(0,c.useState)(!1),[_,B]=(0,c.useState)(""),{user:P}=(0,x.ll)(),{toast:D}=(0,u.pm)(),{isFetching:Y}=(0,N.y)(),F=(0,d.t)(null!==(e=null==P?void 0:P.id)&&void 0!==e?e:""),L=(0,d.P)(null!==(t=null==P?void 0:P.id)&&void 0!==t?t:""),H=(0,n.aM)(i.h.users.getTotalPodcastsOfUser,{clerkId:null!==(s=null==P?void 0:P.id)&&void 0!==s?s:""}),Z=(0,n.BH)(i.h.stripe.pay),R=(0,n.BH)(i.h.stripe.cancelSubscription),U=(0,n.BH)(i.h.stripe.createCustomerPortal),V="Enterprise"===L.plan?"unlimited":30-H,G=async e=>{if(B(e),I(!0),"Free"===e){C.push("/");return}z&&(e+="-annual");try{let t=await Z({plan:e});C.push(t)}catch(e){D({title:"Error",description:"An error occurred while processing your payment",variant:"destructive"}),I(!1),B("")}I(!1),B("")},W=async()=>{if(B("cancel"),I(!0),!window.confirm("Are you sure you want to cancel your subscription?")){B(""),I(!1);return}if(!P){D({title:"Error",description:"You must be logged in to cancel your subscription",variant:"destructive"}),B(""),I(!1);return}if("Free"===L.plan){D({title:"Error",description:"You cannot cancel a free subscription",variant:"destructive"}),B(""),I(!1);return}try{(await R({clerkId:P.id})).success&&(D({title:"Success",description:"Your subscription has been cancelled",variant:"success"}),B(""),I(!1),C.replace("/"))}catch(e){D({title:"Error",description:"An error occurred while cancelling your subscription, please try again later.",variant:"destructive"}),B(""),I(!1)}},q=async()=>{try{B("manage"),I(!0);let e=await U();C.push(e),I(!1),B("")}catch(e){B(""),I(!1),D({title:"Error",description:"An error occurred while processing your request",variant:"destructive"})}};return!Y&&p?(0,l.jsxs)("main",{className:"flex relative flex-col w-full items-center justify-center min-h-screen bg-zinc-950",children:[(0,l.jsx)(o.default,{width:1920,height:1080,className:"absolute w-screen h-full min-h-screen object-cover z-0",src:"/images/blueBlob.svg",alt:"alt text"}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-white-1 z-50 text-center",children:"Thank you for subscribing!"}),(0,l.jsxs)("p",{className:" text-gray-300 mt-4 z-30 text-center",children:["You are now subscribed to the ",L.plan," plan."]})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Suspense,{fallback:(0,l.jsx)(function(){return(0,l.jsx)("div",{className:"fixed top-0 left-0 z-50 w-full h-full bg-[--primary-color] flex items-center justify-center",children:(0,l.jsx)(k.Z,{})})},{}),children:(0,l.jsx)(T,{setSuccess:A})}),Y&&!F?(0,l.jsx)("div",{className:"fixed top-0 left-0 z-50 w-full h-full bg-[--primary-color] flex items-center justify-center",children:(0,l.jsx)(k.Z,{})}):F?(0,l.jsxs)("div",{className:"flex relative flex-col",children:[(0,l.jsxs)("div",{className:"flex relative w-full min-h-screen",children:[(0,l.jsx)(h.default,{}),(0,l.jsxs)("div",{className:"flex flex-col flex-1 bg-[--primary-color] rounded-lg p-[24px] w-full",children:[(0,l.jsxs)("div",{className:"flex h-16 items-center justify-between md:hidden",children:[(0,l.jsx)(o.default,{src:"/icons/miclogo.svg",width:30,height:30,alt:"menu icon"}),(0,l.jsx)(m.default,{})]}),(0,l.jsx)("h1",{className:"text-4xl font-bold text-white-1 text-center",children:"Your current plan"}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 mt-8",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-white-1",children:"Plan details"}),(0,l.jsxs)("div",{className:"flex flex-col w-full mx-auto",children:[(0,l.jsxs)("p",{className:"flex relative justify-between items-center text-base text-slate-300",children:[(0,l.jsxs)("div",{className:"flex items-center self-start gap-2",children:["Your current plan is the ",L.plan," plan"," ",L.endsOn>Date.now()+2592e6?(0,l.jsx)("span",{className:"inline-flex me-2 items-center text-xs text-gray-300 bg-gray-700  rounded-full py-0.5 px-2.5",children:"Billed annually"}):null]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)(a.z,{onClick:()=>q(),title:"Manage",className:"w-[fit-content] hover:brightness-[.85] bg-[--accent-color] text-white-1",children:[O&&"manage"===_?(0,l.jsx)(E,{}):null,"Manage"]}),(0,l.jsxs)(a.z,{onClick:()=>W(),title:"Cancel",className:"w-[fit-content] hover:brightness-[.85] bg-red-500 text-white-1",children:[O&&"cancel"===_?(0,l.jsx)(E,{}):null,"Cancel"]})]})]}),(0,l.jsxs)("p",{className:"text-base text-slate-300",children:["Your subscription ends on"," ",new Date(L.endsOn).toLocaleDateString()]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-white-1",children:"Usage"}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("p",{className:"text-base text-slate-300",children:[(0,l.jsx)(y,{size:24,className:"inline-flex mr-2 text-white-1"}),"You have created ",H," podcasts this month."]}),(0,l.jsxs)("p",{className:"flex items-center text-base text-slate-300",children:["unlimited"===V||V-H==30?(0,l.jsx)(w,{size:24,className:"inline-flex mr-2 text-white-1",style:{transform:"rotate(270deg)"}}):V>10?(0,l.jsx)(j,{size:24,className:"inline-flex mr-2 text-white-1",style:{transform:"rotate(270deg)"}}):V<=10&&V>0?(0,l.jsx)(g,{size:24,className:"inline-flex mr-2 text-white-1",style:{transform:"rotate(270deg)"}}):0===V?(0,l.jsx)(v,{size:24,className:"inline-flex mr-2 text-white-1",style:{transform:"rotate(270deg)"}}):null,"You have ",V," podcasts remaining for the month of"," ",new Date().toLocaleString("default",{month:"long"}),"."]})]})]})]})]}),(0,l.jsx)(f.default,{})]}),(0,l.jsx)(b.default,{})]}):(0,l.jsxs)("main",{className:"flex relative flex-col w-full items-center justify-center min-h-screen bg-zinc-950",children:[(0,l.jsx)(o.default,{width:1920,height:1080,className:"absolute w-screen h-full min-h-screen object-cover z-0",src:"/images/blueBlob.svg",alt:"alt text"}),(0,l.jsxs)("div",{className:"relative items-center px-8 py-6 mx-auto md:px-12 max-w-7xl",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-white-1 z-50 text-center",children:"Choose a plan that works for you"}),(0,l.jsx)("div",{className:"md:max-w-sm mx-auto",children:(0,l.jsxs)("div",{className:"inline-flex w-full border rounded-full my-6 overflow-hidden border-[#fff3] p-0.5 z-0",children:[(0,l.jsx)("button",{type:"button",onClick:()=>M(!1),className:" ".concat(z?"":"bg-[#00000080]"," font-medium rounded-full transition h-12 w-full py-2 block px-8 text-xs text-white-1"),children:"Monthly"}),(0,l.jsx)("button",{onClick:()=>M(!0),className:" ".concat(z?"bg-[#00000080]":""," font-medium rounded-full transition h-12 w-full py-2 block px-8 text-xs border-white text-white-1"),type:"button",children:"Annual"})]})}),(0,l.jsx)("div",{className:"grid grid-cols-1 gap-2 mt-12 lg:grid-cols-3",children:S.dh.map(e=>(0,l.jsxs)("div",{className:"flex flex-col justify-between p-8 shadow-2xl  rounded-3xl ".concat(e.cardBgClass," backdrop-blur-3xl shadow-gray-900/50"),children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex flex-col justify-between gap-3",children:[(0,l.jsx)("p",{className:"text-xl font-medium tracking-tight text-white-1",children:e.name}),(0,l.jsxs)("p",{className:"text-white-1",children:[(0,l.jsx)("span",{className:"text-2xl tracking-tight",children:(0,l.jsxs)("span",{children:["$",z?e.annualPrice:e.monthlyPrice]})}),(0,l.jsxs)("span",{className:"text-base font-medium",children:["/m",(0,l.jsx)("span",{children:z&&"0"!==e.annualPrice&&" (billed annually)"})]})]})]}),(0,l.jsx)("p",{className:"mt-8 text-xs text-[#fffc]",children:e.description}),(0,l.jsxs)("ul",{className:"flex flex-col order-last mt-8 text-sm text-white gap-y-3",children:[e.features.map(e=>(0,l.jsxs)("li",{className:"inline-flex text-white-1 items-center gap-2",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-circle-check",width:"20",height:"20",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),(0,l.jsx)("path",{d:"M9 12l2 2l4 -4"})]}),e]},e)),e.unavailableFeatures.map(e=>(0,l.jsxs)("li",{className:"inline-flex text-white-1 items-center gap-2 opacity-50",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-circle-x",width:"20",height:"20",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),(0,l.jsx)("path",{d:"M10 10l4 4m0 -4l-4 4"})]}),e]},e))]})]}),(0,l.jsx)("div",{className:"flex mt-6",children:(0,l.jsx)("button",{onClick:()=>G(e.name),title:e.name,"aria-label":"get started",className:"flex items-center justify-center w-full  h-12 px-4 py-2 text-base font-medium transition-all duration-200 rounded-xl ".concat(e.buttonClass),children:O&&e.name===_?(0,l.jsx)(E,{}):"Get started"})})]},e.name))})]})]})]})}},7992:function(e,t,s){"use strict";s.d(t,{pm:function(){return u}});var l=s(2265);let n=0,i=new Map,r=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},a=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=a(o,e),c.forEach(e=>{e(o)})}function x(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),l=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||l()}}}),{id:s,dismiss:l,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=l.useState(o);return l.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:x,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},8886:function(e,t,s){"use strict";s.d(t,{P:function(){return c},t:function(){return a}});var l=s(5145),n=s(1620),i=s(5546),r=s(2265);function a(e){let{setIsFetching:t}=(0,i.y)(),s=(0,l.aM)(n.h.users.getSubscriptionByClerkId,{clerkId:e});return(0,r.useEffect)(()=>{s&&t(!1)},[s]),!!s&&!!s.endsOn&&(null==s?void 0:s.endsOn)>Date.now()}function c(e){let{setIsFetching:t}=(0,i.y)(),s=(0,l.aM)(n.h.users.getSubscriptionByClerkId,{clerkId:e});return((0,r.useEffect)(()=>{s&&t(!1)},[s]),s&&s.plan)?s:"free"}},5546:function(e,t,s){"use strict";s.d(t,{y:function(){return r}});var l=s(7437),n=s(2265);let i=(0,n.createContext)(void 0),r=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("useIsFetching must be used within an IsFetchingProvider");return e};t.default=e=>{let{children:t}=e,[s,r]=(0,n.useState)(!0);return(0,l.jsx)(i.Provider,{value:{isFetching:s,setIsFetching:r},children:t})}}},function(e){e.O(0,[316,878,770,37,730,591,50,648,918,673,49,406,961,971,117,744],function(){return e(e.s=653)}),_N_E=e.O()}]);